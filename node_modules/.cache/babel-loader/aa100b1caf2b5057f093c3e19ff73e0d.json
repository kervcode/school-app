{"ast":null,"code":"var _jsxFileName = \"/Users/kervintznoel/Documents/GitHub/school-app-fend/src/Context.js\";\nimport React, { Component } from 'react';\nimport Data from './Data';\nimport Cookies from 'js-cookie';\nconst Context = React.createContext();\nexport class Provider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      authenticatedUser: Cookies.getJSON('authenticatedUser') || null\n    };\n\n    this.signIn = async (emailAddress, password) => {\n      const user = await this.data.getUser(emailAddress, password);\n\n      if (user !== null) {\n        user.password = password;\n        this.setState(() => {\n          return {\n            authenticatedUser: user\n          };\n        }); // Set Cookie\n\n        Cookies.set('authenticatedUser', JSON.stringify(user), {});\n      }\n\n      return user;\n    };\n\n    this.signOut = () => {\n      this.setState(() => {\n        return {\n          authenticatedUser: null\n        };\n      });\n      Cookies.remove('authenticatedUser');\n    };\n\n    this.previousPage = () => {\n      this.history.props.go(-1);\n    };\n\n    this.data = new Data();\n  }\n\n  render() {\n    const authenticatedUser = this.state.authenticatedUser;\n    const value = {\n      authenticatedUser,\n      data: this.data,\n      actions: {\n        //\n        signIn: this.signIn,\n        signOut: this.signOut,\n        goBack: this.previousPage\n      }\n    };\n    return React.createElement(Context.Provider, {\n      value: value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\nexport const Consumer = Context.Consumer;\n/**\n * A higher-order component that wraps the provided component in a Context Consumer component.\n * @param {class} Component - A React component.\n * @returns {function} A higher-order component.\n */\n\nexport default function withContext(Component) {\n  return function ContextComponent(props) {\n    return React.createElement(Context.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, context => React.createElement(Component, Object.assign({}, props, {\n      context: context,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })));\n  };\n}","map":{"version":3,"sources":["/Users/kervintznoel/Documents/GitHub/school-app-fend/src/Context.js"],"names":["React","Component","Data","Cookies","Context","createContext","Provider","constructor","state","authenticatedUser","getJSON","signIn","emailAddress","password","user","data","getUser","setState","set","JSON","stringify","signOut","remove","previousPage","history","props","go","render","value","actions","goBack","children","Consumer","withContext","ContextComponent","context"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAGA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,aAAN,EAAhB;AAEA,OAAO,MAAMC,QAAN,SAAuBL,SAAvB,CAAiC;AAKtCM,EAAAA,WAAW,GAAG;AACZ;AADY,SAJdC,KAIc,GAJN;AACNC,MAAAA,iBAAiB,EAAEN,OAAO,CAACO,OAAR,CAAgB,mBAAhB,KAAwC;AADrD,KAIM;;AAAA,SA2BdC,MA3Bc,GA2BL,OAAOC,YAAP,EAAqBC,QAArB,KAAkC;AACzC,YAAMC,IAAI,GAAG,MAAM,KAAKC,IAAL,CAAUC,OAAV,CAAkBJ,YAAlB,EAAgCC,QAAhC,CAAnB;;AACA,UAAGC,IAAI,KAAK,IAAZ,EAAkB;AAChBA,QAAAA,IAAI,CAACD,QAAL,GAAgBA,QAAhB;AACA,aAAKI,QAAL,CAAc,MAAM;AAClB,iBAAO;AACLR,YAAAA,iBAAiB,EAAEK;AADd,WAAP;AAGD,SAJD,EAFgB,CAOhB;;AACAX,QAAAA,OAAO,CAACe,GAAR,CAAY,mBAAZ,EAAiCC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAjC,EAAuD,EAAvD;AACD;;AACD,aAAOA,IAAP;AACD,KAxCa;;AAAA,SA0CdO,OA1Cc,GA0CJ,MAAM;AACd,WAAKJ,QAAL,CAAe,MAAM;AACnB,eAAO;AACLR,UAAAA,iBAAiB,EAAE;AADd,SAAP;AAGD,OAJD;AAKAN,MAAAA,OAAO,CAACmB,MAAR,CAAe,mBAAf;AACD,KAjDa;;AAAA,SAmDdC,YAnDc,GAmDC,MAAM;AACnB,WAAKC,OAAL,CAAaC,KAAb,CAAmBC,EAAnB,CAAsB,CAAC,CAAvB;AACD,KArDa;;AAEZ,SAAKX,IAAL,GAAY,IAAIb,IAAJ,EAAZ;AACD;;AAEDyB,EAAAA,MAAM,GAAG;AAAA,UAEClB,iBAFD,GAEuB,KAAKD,KAF5B,CAECC,iBAFD;AAIP,UAAMmB,KAAK,GAAG;AACZnB,MAAAA,iBADY;AAEZM,MAAAA,IAAI,EAAE,KAAKA,IAFC;AAGZc,MAAAA,OAAO,EAAE;AAAE;AACTlB,QAAAA,MAAM,EAAE,KAAKA,MADN;AAEPU,QAAAA,OAAO,EAAE,KAAKA,OAFP;AAGPS,QAAAA,MAAM,EAAE,KAAKP;AAHN;AAHG,KAAd;AAUA,WACE,oBAAC,OAAD,CAAS,QAAT;AAAkB,MAAA,KAAK,EAAEK,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKH,KAAL,CAAWM,QADd,CADF;AAKD;;AA7BqC;AA6DxC,OAAO,MAAMC,QAAQ,GAAG5B,OAAO,CAAC4B,QAAzB;AAEP;;;;;;AAMA,eAAe,SAASC,WAAT,CAAqBhC,SAArB,EAAgC;AAC7C,SAAO,SAASiC,gBAAT,CAA0BT,KAA1B,EAAiC;AACtC,WACE,oBAAC,OAAD,CAAS,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGU,OAAO,IAAI,oBAAC,SAAD,oBAAeV,KAAf;AAAsB,MAAA,OAAO,EAAEU,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADd,CADF;AAKD,GAND;AAOD","sourcesContent":["import React, { Component } from 'react';\nimport Data from './Data';\nimport Cookies from 'js-cookie';\n\n\nconst Context = React.createContext(); \n\nexport class Provider extends Component {\n  state = {\n    authenticatedUser: Cookies.getJSON('authenticatedUser') || null\n  }\n  \n  constructor() {\n    super();\n    this.data = new Data();\n  }\n\n  render() {\n    \n    const { authenticatedUser } = this.state;\n    \n    const value = {\n      authenticatedUser,\n      data: this.data,\n      actions: { //\n        signIn: this.signIn,\n        signOut: this.signOut,\n        goBack: this.previousPage\n      }\n    }\n    \n    return (\n      <Context.Provider value={value}>\n        {this.props.children}\n      </Context.Provider>  \n    );\n  }\n\n  \n  signIn = async (emailAddress, password) => {\n    const user = await this.data.getUser(emailAddress, password);\n    if(user !== null) {\n      user.password = password;\n      this.setState(() => {\n        return {\n          authenticatedUser: user,\n        };\n      });\n      // Set Cookie\n      Cookies.set('authenticatedUser', JSON.stringify(user), { });\n    }\n    return user;\n  }\n\n  signOut = () => {\n    this.setState( () => {\n      return {\n        authenticatedUser: null,\n      }\n    });\n    Cookies.remove('authenticatedUser');\n  }\n\n  previousPage = () => {\n    this.history.props.go(-1)\n  }\n}\n\nexport const Consumer = Context.Consumer;\n\n/**\n * A higher-order component that wraps the provided component in a Context Consumer component.\n * @param {class} Component - A React component.\n * @returns {function} A higher-order component.\n */\n\nexport default function withContext(Component) {\n  return function ContextComponent(props) {\n    return (\n      <Context.Consumer>\n        {context => <Component {...props} context={context} />}\n      </Context.Consumer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}